<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Cognate - Related to the Same Common Root &mdash; Cognate 0.0.1 Documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="top" title="Cognate 0.0.1 Documentation" href="#" />
    <link rel="next" title="Getting Started with Cognate" href="cognate.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cognate.html" title="Getting Started with Cognate"
             accesskey="N">next</a> |</li>
        <li><a href="#">Cognate 0.0.1 Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="cognate-related-to-the-same-common-root">
<h1>Cognate - Related to the Same Common Root<a class="headerlink" href="#cognate-related-to-the-same-common-root" title="Permalink to this headline">¶</a></h1>
<p><em>Cognate</em> is a package to make development of configurable component services
easy to implement. Configurable here pertains to options settings, logging
configuration, and service naming. Component here means the creation of isolated
bits of code with well defined configuration and interfaces.</p>
<p>To be less cryptic, lets demonstrate the <em>HelloWorld</em> example. To begin,
create a component service class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">cognate.component_core</span> <span class="kn">import</span> <span class="n">ComponentCore</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">ComponentCore</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;World&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="n">ComponentCore</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cognate_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg_parser</span><span class="p">):</span>
        <span class="n">arg_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s">&#39;--name&#39;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s">&#39;Whom will receive the salutation.&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;Hello </span><span class="si">%s</span><span class="s">&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">argv</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span>
    <span class="n">service</span> <span class="o">=</span> <span class="n">HelloWorld</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">service</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">HelloWorld</span></tt> class defines a property <tt class="docutils literal"><span class="pre">name</span></tt> that will be used to
construct the log output during execution of the <tt class="docutils literal"><span class="pre">run</span></tt> method. The
<tt class="docutils literal"><span class="pre">cognate_options</span></tt> method is used to declare any attributes of the service
utilizing an <strong>argparse.ArgumentParser</strong> instance passed as the <tt class="docutils literal"><span class="pre">arg_parser</span></tt>
parameter. Child classes of <em>ComponentCore</em> can use all the features of the
python <strong>argparse.ArgumentParser</strong>, and these will be automatically mapped to
attributes of the same name for a given service instance.</p>
<p>With the <tt class="docutils literal"><span class="pre">HelloWorld</span></tt> component service above, the complete service features
can be demonstrated with the listing of the service usage. As in:</p>
<div class="highlight-python"><pre>/cognate &gt; python example/hello_world.py -h
usage: hello_world.py [-h] [--service_name SERVICE_NAME]
                      [--log_level {debug,info,warn,error}]
                      [--log_path LOG_PATH] [--verbose] [--name NAME]

optional arguments:
  -h, --help            show this help message and exit
  --service_name SERVICE_NAME
                        This will set the name for the current instance.
                        This will be reflected in the log output.
                        (default: HelloWorld)
  --log_level {debug,info,warn,error}
                        Set the log level for the log output. (default: error)
  --log_path LOG_PATH   Set the path for log output. The default file created
                        is "&lt;log_path&gt;/&lt;service_name&gt;.log". If the path
                        ends with a ".log" extension, then the path be a
                        target file. (default: None)
  --verbose             Enable verbose log output to console. Useful for
                        debugging. (default: False)
  --name NAME           Whom will receive the salutation. (default: World)</pre>
</div>
<p>Note how <em>ComponentCore</em> adds the features for app naming, log configuration
and output. Also folded in, is the configuration option for the <em>name</em>
that is provided by the <tt class="docutils literal"><span class="pre">HelloWorld</span></tt> class.</p>
<p>Simply running <tt class="docutils literal"><span class="pre">python</span> <span class="pre">example/helloworld.py</span></tt> will cause silent execution as
default <em>log_level</em> is <em>error</em>. In addition, the logging output is silent,
as the <em>verbose</em> option is <em>False</em>.</p>
<p>To demonstrate <em>HelloWorld</em> with output, run:</p>
<div class="highlight-python"><pre>/cognate &gt; python example/hello_world.py  --verbose --log_level info
MainThread:2014-08-02 13:30:57,988 -HelloWorld - INFO -- Logging configured for: HelloWorld
MainThread:2014-08-02 13:30:57,988 -HelloWorld - INFO -- Component service configuration complete with argv: Namespace(log_level='info', log_path=None, name='World', service_name='HelloWorld', verbose=True)
MainThread:2014-08-02 13:30:57,989 -HelloWorld - INFO -- Hello World</pre>
</div>
<p>Note the setting of the <cite>verbose</cite> flag to enable logging output to console.
In addition, the <cite>log_level</cite> flag is set to info, to enable logging output of
the <em>HelloWorld</em> execution.</p>
<p>The <em>ComponentCore</em> will map arg_parser defined options to an attribute name
and apply that value to the service instance.  In the <em>HelloWorld</em> example,
the arg_parser <cite>&#8211;name</cite> option is mapped to the <cite>self.name</cite> attribute. The
net effect is to allow configuration of the service via command line args,
as in:</p>
<div class="highlight-python"><pre>/cognate &gt; python example/hello_world.py  --verbose --log_level info --name Dog
MainThread:2014-08-02 13:30:16,022 -HelloWorld - INFO -- Logging configured for: HelloWorld
MainThread:2014-08-02 13:30:16,022 -HelloWorld - INFO -- Component service configuration complete with argv: Namespace(log_level='info', log_path=None, name='Dog', service_name='HelloWorld', verbose=True)
MainThread:2014-08-02 13:30:16,022 -HelloWorld - INFO -- Hello Dog</pre>
</div>
<p>A benefit to defining component services with <em>ComponentCore</em> is the ability
to  utilize the component as an instance. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">hello_world</span> <span class="kn">import</span> <span class="n">HelloWorld</span>

<span class="c"># Configure with argv string</span>
<span class="n">argv</span> <span class="o">=</span> <span class="s">&#39;--verbose --log_level info --service_name CatWorld --name Cat&#39;</span>
<span class="n">hello_cat</span> <span class="o">=</span> <span class="n">HelloWorld</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="n">argv</span><span class="p">)</span>

<span class="c"># Configure with parameters</span>
<span class="n">hello_dog</span> <span class="o">=</span> <span class="n">HelloWorld</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                       <span class="n">log_level</span><span class="o">=</span><span class="s">&#39;info&#39;</span><span class="p">,</span>
                       <span class="n">service_name</span><span class="o">=</span><span class="s">&#39;DogWorld&#39;</span><span class="p">,</span>
                       <span class="n">name</span><span class="o">=</span><span class="s">&#39;Dog&#39;</span><span class="p">)</span>

<span class="n">hello_cat</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">hello_dog</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>The script above demonstrates how the component service can be configured
utilizing a string passed via the <cite>argv</cite> parameter, as well as being
instantiated via direct parameter passing. The script above would give output
such as:</p>
<div class="highlight-python"><pre>/cognate &gt; python example/hello_script.py
MainThread:2014-08-02 13:32:11,237 -CatWorld - INFO -- Logging configured for: CatWorld
MainThread:2014-08-02 13:32:11,237 -CatWorld - INFO -- Component service configuration complete with argv: Namespace(log_level='info', log_path=None, name='Cat', service_name='CatWorld', verbose=True)
MainThread:2014-08-02 13:32:11,237 -DogWorld - INFO -- Logging configured for: DogWorld
MainThread:2014-08-02 13:32:11,237 -DogWorld - INFO -- Component service configuration complete with argv: Namespace(log_level='info', log_path=None, name='Dog', service_name='DogWorld', verbose=True)
MainThread:2014-08-02 13:32:11,238 -CatWorld - INFO -- Hello Cat
MainThread:2014-08-02 13:32:11,238 -DogWorld - INFO -- Hello Dog</pre>
</div>
<p>The ability to treat component services as isolated code with well defined
interfaces make reuse of components much easier, as well as usage in
multi-threaded environments.</p>
<p>Be sure to checkout <a class="reference internal" href="cognate.html#getting-started-with-cognate"><em>Getting Started with Cognate</em></a> to delve into all the
goodness.</p>
<p><strong>Share and Enjoy</strong></p>
<div class="section" id="usage-documentation">
<h2>Usage Documentation<a class="headerlink" href="#usage-documentation" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="cognate.html">Getting Started with Cognate</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cognate.html#hola-mundo-demo-service">Hola Mundo Demo Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="cognate.html#configuration-management-and-initialization">Configuration Management and Initialization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cognate.html#command-line-option-construction">Command Line Option Construction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cognate.html#logging-and-log-configuration">Logging and Log Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="cognate.html#dynamic-service-naming">Dynamic Service Naming</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="api-documentation">
<h2>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="cognate.component_core.html">Component Core Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cognate.component_core.html#class">Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cognate.component_core.html#componentcore">ComponentCore</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cognate.component_core.html#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cognate.component_core.html#copy-attribute-values">copy_attribute_values</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="indices-and-tables">
<h3>Indices and Tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Cognate - Related to the Same Common Root</a><ul>
<li><a class="reference internal" href="#usage-documentation">Usage Documentation</a><ul>
</ul>
</li>
<li><a class="reference internal" href="#api-documentation">API Documentation</a><ul>
<li><a class="reference internal" href="#indices-and-tables">Indices and Tables</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="cognate.html"
                        title="next chapter">Getting Started with Cognate</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cognate.html" title="Getting Started with Cognate"
             >next</a> |</li>
        <li><a href="#">Cognate 0.0.1 Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Raul Gonzalez.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>